<div class="wrapper wrapper-tab-agents">
	<div class="message-search">
		<div class="container-text">
			32 agents disponibles
		</div>
		<div class="container-action">
			<form role="search">
				<input type="search" value="" placeholder="Rechercher un agents, exploitation…" class="search-input">
				<button type="submit" class="search-button">
					<img src="img/agents/agenda/loupe.svg">
				</button>
			</form>
		</div>
	</div>
	
	<div class="container-agents">

		<div class="agent">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li class="show"><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li>2 clients en charge</li>
				</ul>
			</div>
			<div class="message">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="agent big">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li><img src="img/header/people.jpg"></li>
					<li class="show active"><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li>4 clients en charge</li>
				</ul>
			</div>
			<div class="message active">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="agent">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li class="show active"><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li class="plus">+2</li>
					<li>4 clients en charge</li>
				</ul>
			</div>
			<div class="message active">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="agent">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li><img src="img/header/people.jpg"></li>
					<li class="show active"><img src="img/header/people.jpg"></li>
					<li>2 clients en charge</li>
				</ul>
			</div>
			<div class="message active">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="agent">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li><img src="img/header/people.jpg"></li>
					<li class="show"><img src="img/header/people.jpg"></li>
					<li>2 clients en charge</li>
				</ul>
			</div>
			<div class="message">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="agent big">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li><img src="img/header/people.jpg"></li>
					<li class="show active"><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li>4 clients en charge</li>
				</ul>
			</div>
			<div class="message active">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="agent">
			<div class="container-infos">
				<div class="container-img">
					<img src="img/header/people.jpg">
				</div>
				<div class="col">
					<div class="name">Barthélémy Chalvet</div>
					<div class="num">023987F</div>
					<div class="nbE">2 exploitations</div>
				</div>
				<ul class="container-clients">
					<li class="show active"><img src="img/header/people.jpg"></li>
					<li><img src="img/header/people.jpg"></li>
					<li class="plus">+2</li>
					<li>4 clients en charge</li>
				</ul>
			</div>
			<div class="message active">
				<div class="logo">
					<img class="default" src="img/agents/agenda/iconemessage-black.svg">
					<img class="urgent" src="img/agents/agenda/iconemessage-violet.svg">
				</div>
				<div class="container-text">
					<h3>
						Dernier message
					</h3>
					<p>
						Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s Outdoor advertising is a low budget and effective way of advertising a company’s
					</p>
				</div>
			</div>
			<div class="container-action">
				Actions
				<div class="dropdown">
					<div class="action information">
						<img src="img/agents/clients/info-picto.svg">
						Informations
					</div>
					<div class="action modifier">
						<img src="img/agents/clients/edit-picto.svg">
						Modifier
					</div>
					<div class="action supprimer">
						<img src="img/agents/agenda/supprimer.svg">
						Supprimer
					</div>
				</div>
			</div>
		</div>

		<div class="more">Voir plus</div>

	</div>
</div>
<script>
function initMapsAgents() {

	let icons = [
		{
			url: "img/agents/common/marker-01.svg",
			origin: new google.maps.Point(0, 0),
			anchor: new google.maps.Point(0, 32)
		},
		{
			url: "img/agents/common/marker-02.svg",
			origin: new google.maps.Point(0, 0),
			anchor: new google.maps.Point(0, 32)
		}
	];

	let mapLightbox = $('lightbox .box.infoAgents .map');
	let mapL = new google.maps.Map(mapLightbox[0], {
		center: { lat: 49.4431, lng: 1.0993 },
		zoom: 10,
		disableDefaultUI: true
	});

	//content test
	contentest = '<div id="content">' +
      				'<div id="siteNotice"></div>' +
      				'<h1 id="firstHeading" class="firstHeading">BARTHELEMY CHALVET' +
      				'<img src="img/header/people.jpg" ></h1>' +
      				'<div id="bodyContent" class="body">' +
      					'<div class="container-info">' +
      						'<div class="type">Type d\'installation</div>' +
      						'<div class="info">' +
      							'<div class="left">Elevage(Bovins)</div>' +
      							'<div class="right">20%<img src="img/agents/common/graph.svg" alt=""></div>' +
      						'</div>' +
      						'<div class="info">' +
      							'<div class="left">Capteurs</div>' +
      							'<div class="right">2</div>' +
      						'</div>' + 
			      		'</div>' +
						'<div class="container-adress">' +
			      			'1451 boulebard magenta, 75010, Paris' +
			      		'</div>' +
					'</div>' +
				  '</div>';

	let featuresL = [
		{
			name: "Rouen",
			position: { lat: 49.4431, lng: 1.0993 },
			content: contentest
		},
		{
			name: "Barentin",
			position: { lat: 49.55, lng: 0.95 },
			content: contentest
		},
		{
			name: "Franqueville-Saint-Pierre",
			position: { lat: 49.401, lng: 1.1807 },
			content: contentest
		}
	];

	let markersL = [];
	featuresL.forEach(function(feature) {
		let infoWindow = new google.maps.InfoWindow({
			content: feature.content
		});
		let marker = new google.maps.Marker({
			position: feature.position,
			map: mapL,
			title: feature.name,
			icon: icons[0],
			infowindow: infoWindow
		});
		marker.addListener('click', function() {
			setTimeout(function(){
				infoWindow.open(mapL, marker);
				marker.setIcon(icons[1]);
			}, 250);
		});
		markersL.push(marker);

		//STYLE INFOWINDOW
		google.maps.event.addListener(infoWindow, 'domready', function() {

			var iwOuter = $('.gm-style-iw');
			var iwBackground = iwOuter.prev();

			iwBackground.children(':nth-child(2)').css({'display' : 'none'});
			iwBackground.children(':nth-child(4)').css({'display' : 'none'});

			iwBackground.children(':nth-child(1)').attr('style', function(i,s){ return s + 'left: 76px !important;'});
			iwBackground.children(':nth-child(3)').attr('style', function(i,s){ return s + 'left: 76px !important;'});
			iwBackground.children(':nth-child(3)').find('div').children().css({'box-shadow': 'rgba(72, 181, 233, 0.6) 0px 1px 6px', 'z-index' : '1'});

			let iwCloseBtn = iwOuter.next();
			iwCloseBtn.css({
			'display':'none'
			});
		});
	});

	closeInfoWindow = function() {
		markersL.forEach(function(marker) {
			marker.infowindow.close(mapL, marker);
			marker.setIcon(icons[0]);
		});
	};
	google.maps.event.addListener(mapL, 'click', closeInfoWindow);
	markersL.forEach(function(marker) {
		google.maps.event.addListener(marker, 'click', closeInfoWindow);
	});
}
</script>