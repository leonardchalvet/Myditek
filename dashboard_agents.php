<div class="wrapper wrapper-tab-dashboard">
	<div class="container-el">

		<div class="el">
			<div class="head">
				<h4>Taux d’anomalie</h4>
				<div class="container-dropdown">
					<div class="container-rslt">
						<div class="rslt">
							Janvier 2018
						</div>
						<div class="arrow">
							<img src="img/header/down-arrow.svg">
						</div>
						<ul class="dropdown">
							<li>Janvier 2017</li>
							<li>Février 2017</li>
							<li>Mars 2017</li>
							<li>Avril 2017</li>
							<li>Mai 2017</li>
							<li>Juin 2017</li>
							<li>Juillet 2017</li>
							<li>Aout 2017</li>
							<li>Septembre 2017</li>
							<li>Octobre 2017</li>
							<li>Novembre 2017</li>
							<li>Décembre 2017</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="container-ist">
				<div class="container-btn">
					<div class="btn">Colliers</div>
					<div class="btn active">Bornes</div>
				</div>
				<div id="chartdiv" class="chartdiv" style="width: 100%; height: 400px; background-color: #FFFFFF;" ></div>
			</div>
		</div>
		
		<div class="el">
			<div class="head">
				<h4>Colliers actif</h4>
				<div class="container-dropdown">
					<div class="container-rslt">
						<div class="rslt">
							Janvier 2018
						</div>
						<div class="arrow">
							<img src="img/header/down-arrow.svg">
						</div>
						<ul class="dropdown">
							<li>Janvier 2017</li>
							<li>Février 2017</li>
							<li>Mars 2017</li>
							<li>Avril 2017</li>
							<li>Mai 2017</li>
							<li>Juin 2017</li>
							<li>Juillet 2017</li>
							<li>Aout 2017</li>
							<li>Septembre 2017</li>
							<li>Octobre 2017</li>
							<li>Novembre 2017</li>
							<li>Décembre 2017</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="container-ist red">
				<div class="container-pourcent">
					<div class="container-num">
						<div class="num-prct">83%</div>
						<div class="num-lgd">20 actifs /30</div>
						<div class="graph">
							<span>20%</span>
							<img src="img/agents/common/graph.svg" alt="">
						</div>
					</div>
					<div class="container-stats">
						<div class="container-subline">
							<div class="title">
								Elevage (bovins)
							</div>
						</div>
						<div class="container-line">
							<div class="line">
								<div style="width: 83%;" class="fill"></div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="head head-2 marge">
				<h4>Colliers actif</h4>
				<div class="container-dropdown">
					<div class="container-rslt">
						<div class="rslt">
							Janvier 2018
						</div>
						<div class="arrow">
							<img src="img/header/down-arrow.svg">
						</div>
						<ul class="dropdown">
							<li>Janvier 2017</li>
							<li>Février 2017</li>
							<li>Mars 2017</li>
							<li>Avril 2017</li>
							<li>Mai 2017</li>
							<li>Juin 2017</li>
							<li>Juillet 2017</li>
							<li>Aout 2017</li>
							<li>Septembre 2017</li>
							<li>Octobre 2017</li>
							<li>Novembre 2017</li>
							<li>Décembre 2017</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="container-ist blue">
				<div class="container-pourcent">
					<div class="container-num">
						<div class="num-prct">72%</div>
						<div class="num-lgd">18 actifs /30</div>
						<div class="graph">
							<span>5%</span>
							<img src="img/agents/common/graph.svg" alt="">
						</div>
					</div>
					<div class="container-stats">
						<div class="container-subline">
							<div class="title">
								Culture (Bannane)
							</div>
						</div>
						<div class="container-line">
							<div class="line">
								<div style="width: 72%;" class="fill"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="el">
			<div class="head head-2">
				<h4>Rendez-vous repporté / En attente</h4>
				<div class="container-dropdown">
					<div class="container-rslt">
						<div class="rslt">
							Janvier 2018
						</div>
						<div class="arrow">
							<img src="img/header/down-arrow.svg">
						</div>
						<ul class="dropdown">
							<li>Janvier 2017</li>
							<li>Février 2017</li>
							<li>Mars 2017</li>
							<li>Avril 2017</li>
							<li>Mai 2017</li>
							<li>Juin 2017</li>
							<li>Juillet 2017</li>
							<li>Aout 2017</li>
							<li>Septembre 2017</li>
							<li>Octobre 2017</li>
							<li>Novembre 2017</li>
							<li>Décembre 2017</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="container-ist row">
				<div class="col">
					<div class="container-pourcent">
						<div class="bullet blue"></div>
						<div class="container-num">
							<div class="num-prct">71%</div>
							<div class="num-lgd">Rendez vous reportés</div>
							<div class="graph">
								<span>+2%</span>
								<img src="img/agents/common/graph.svg" alt="">
							</div>
						</div>
					</div>
					<div class="container-pourcent">
						<div class="bullet gray"></div>
						<div class="container-num">
							<div class="num-prct">29%</div>
							<div class="num-lgd">Rendez vous en attente</div>
							<div class="graph neg">
								<span>-4%</span>
								<img src="img/agents/common/graph-neg.svg" alt="">
							</div>
						</div>
					</div>
				</div>
				<div class="container-circle">
					<div class="container-text">
						<div class="num-prct">91</div>
						<div class="num-lgd">RDV</div>
					</div>
					<svg class="circle-chart" viewbox="0 0 33.83098862 33.83098862" width="180" height="180" xmlns="http://www.w3.org/2000/svg">
						<circle class="circle-chart__background" stroke-width="1" fill="none" cx="16.91549431" cy="16.91549431" r="15.91549431" />
						<?php $pourcent = 100 - 71; //VALEUR A CHANGER POUR LE % => 100 - VALEUR?>
						<circle class="circle-chart__circle" <?php echo 'style="stroke-dashoffset:'.$pourcent.';"'; ?> stroke-width="1" stroke-dasharray="25,100" fill="none" cx="16.91549431" cy="16.91549431" r="15.91549431" />
					</svg>
				</div>
			</div>
		</div>

		<div class="el">
			<div class="head head-2">
				<h4>Drone</h4>
				<div class="container-dropdown">
					<div class="container-rslt">
						<div class="arrow">
							<img src="img/agents/dashboard/right-arrow.svg">
						</div>
					</div>
				</div>
			</div>
			<div class="container-ist row">
				<div class="drone">
					<div class="container-title">
						Survol à venir
					</div>
					<div class="container-illu">
						<img src="img/agents/dashboard/drone.svg">
					</div>
					<div class="container-action">
						<img src="img/agents/dashboard/map-icone.svg">
						<div class="container-text">
							<div class="container-title">
								San Francisco
							</div>
							<div class="container-info">
								Myditek  18/09 à 12h34
							</div>
							<img src="img/agents/dashboard/right-arrow.svg">
						</div>
					</div>
				</div>
				<div class="coord">
					<div class="container-title">
						Survol passé
					</div>
					<a class="container-coord" href="#">
						<div class="coord" id="butC1"></div>
						<div class="date">
							18/09/18
						</div>
						<div class="time">
							12:34
							<img src="img/agents/dashboard/right-arrow.svg">
						</div>
					</a>
					<a class="container-coord" href="#">
						<div class="coord" id="butC2"></div>
						<div class="date">
							20/09/18
						</div>
						<div class="time">
							14:30
							<img src="img/agents/dashboard/right-arrow.svg">
						</div>
					</a>
					<a class="container-coord" href="#">
						<div class="coord" id="butC3"></div>
						<div class="date">
							21/09/18
						</div>
						<div class="time">
							09:10
							<img src="img/agents/dashboard/right-arrow.svg">
						</div>
					</a>
					<a class="container-action" href="#">
						Tout voir
						<img src="img/agents/dashboard/right-arrow.svg">
					</a>
				</div>
			</div>
		</div>
	</div>

	<div class="container-map">
		<div class="head">
			<h4>Carte</h4>
		</div>
		<div id="map"></div>
	</div>

</div>

<!-- GRAPH -->
<script type="text/javascript">
function initMapsDashboard() {
		//Les trois bouttons coord => changer les coord - DASHBOARD
	let butC1 = new google.maps.Map(document.getElementById('butC1'), {
		center: { lat: 49.4431, lng: 1.0993 },
		zoom: 4,
		disableDefaultUI: true,
		draggable: false
	}); 
	let butC2 = new google.maps.Map(document.getElementById('butC2'), {
		center: { lat: 49.4431, lng: 1.0993 },
		zoom: 4,
		disableDefaultUI: true,
		draggable: false
	}); 
	let butC3 = new google.maps.Map(document.getElementById('butC3'), {
		center: { lat: 49.4431, lng: 1.0993 },
		zoom: 4,
		disableDefaultUI: true,
		draggable: false
	});

	/* ---------------- */

	//buttons exploitation - PROFIL EXPLOITATION
	let butE = new google.maps.Map(document.getElementById('butE1'), {
		center: { lat: 49.4431, lng: 1.0993 },
		zoom: 4,
		disableDefaultUI: true,
		draggable: false
	});

	/* ---------------- */

	// map dashboard
	let map = new google.maps.Map(document.getElementById('map'), {
		center: { lat: 49.4431, lng: 1.0993 },
		zoom: 10,
		disableDefaultUI: true
	});

	//boucle ici pour les différents marker, ici un exemple sur Rouen
	let icons = [
		{
			url: "img/agents/common/marker-01.svg",
			origin: new google.maps.Point(0, 0),
			anchor: new google.maps.Point(0, 32)
		},
		{
			url: "img/agents/common/marker-02.svg",
			origin: new google.maps.Point(0, 0),
			anchor: new google.maps.Point(0, 32)
		}
	];
	//content test
	contentest = '<div id="content">' +
      				'<div id="siteNotice"></div>' +
      				'<h1 id="firstHeading" class="firstHeading">BARTHELEMY CHALVET' +
      				'<img src="img/header/people.jpg" ></h1>' +
      				'<div id="bodyContent" class="body">' +
      					'<div class="container-info">' +
      						'<div class="type">Type d\'installation</div>' +
      						'<div class="info">' +
      							'<div class="left">Elevage(Bovins)</div>' +
      							'<div class="right">20%<img src="img/agents/common/graph.svg" alt=""></div>' +
      						'</div>' +
      						'<div class="info">' +
      							'<div class="left">Capteurs</div>' +
      							'<div class="right">2</div>' +
      						'</div>' + 
			      		'</div>' +
						'<div class="container-adress">' +
			      			'1451 boulebard magenta, 75010, Paris' +
			      		'</div>' +
					'</div>' +
				  '</div>';

	let features = [
		{
			name: "Rouen",
			position: { lat: 49.4431, lng: 1.0993 },
			content: contentest
		},
		{
			name: "Barentin",
			position: { lat: 49.55, lng: 0.95 },
			content: contentest
		},
		{
			name: "Franqueville-Saint-Pierre",
			position: { lat: 49.401, lng: 1.1807 },
			content: contentest
		}
	];

	let markers = [];
	features.forEach(function(feature) {
		let infoWindow = new google.maps.InfoWindow({
			content: feature.content
		});
		let marker = new google.maps.Marker({
			position: feature.position,
			map: map,
			title: feature.name,
			icon: icons[0],
			infowindow: infoWindow
		});
		marker.addListener('click', function() {
			setTimeout(function(){
				infoWindow.open(map, marker);
				marker.setIcon(icons[1]);
			}, 250);
		});
		markers.push(marker);

		//STYLE INFOWINDOW
		google.maps.event.addListener(infoWindow, 'domready', function() {

			var iwOuter = $('.gm-style-iw');
			var iwBackground = iwOuter.prev();

			iwBackground.children(':nth-child(2)').css({'display' : 'none'});
			iwBackground.children(':nth-child(4)').css({'display' : 'none'});

			iwBackground.children(':nth-child(1)').attr('style', function(i,s){ return s + 'left: 76px !important;'});
			iwBackground.children(':nth-child(3)').attr('style', function(i,s){ return s + 'left: 76px !important;'});
			iwBackground.children(':nth-child(3)').find('div').children().css({'box-shadow': 'rgba(72, 181, 233, 0.6) 0px 1px 6px', 'z-index' : '1'});

			let iwCloseBtn = iwOuter.next();
			iwCloseBtn.css({
			'display':'none'
			});
		});
	});

	closeInfoWindow = function() {
		markers.forEach(function(marker) {
			marker.infowindow.close(map, marker);
			marker.setIcon(icons[0]);
		});
	};
	google.maps.event.addListener(map, 'click', closeInfoWindow);
	markers.forEach(function(marker) {
		google.maps.event.addListener(marker, 'click', closeInfoWindow);
	});
}
</script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
<script type="text/javascript">
AmCharts.makeChart("chartdiv",
	{
		"type": "serial",
		"categoryField": "date",
		"columnSpacing": 0,
		"columnWidth": 0,
		"dataDateFormat": "YYYY-MM-DD",
		"maxSelectedSeries": 0,
		"addClassNames": true,
		"processCount": 998,
		"categoryAxis": {
			"parseDates": true,
			"autoGridCount": false,
			"axisThickness": 0,
			"boldPeriodBeginning": false,
			"centerLabelOnFullPeriod": false,
			"color": "#BBBBBB",
			"firstDayOfWeek": 0,
			"gridCount": 1,
			"gridThickness": 0,
			"labelFrequency": 48,
			"markPeriodChange": false,
			"offset": 1,
			"titleFontSize": 0
		},
		"chartCursor": {
			"enabled": true,
			"animationDuration": 0,
			"bulletSize": 0,
			"categoryBalloonAlpha": 0,
			"categoryBalloonDateFormat": "DD MMM",
			"color": "#CC0000",
			"cursorAlpha": 0.47,
			"graphBulletAlpha": 0,
			"graphBulletSize": 3,
			"limitToGraph": "AmGraph-1",
			"selectionAlpha": 0,
			"valueBalloonsEnabled": false,
			"valueLineAlpha": 0
		},
		"trendLines": [],
		"graphs": [
			{
				"fillColors": "undefined",
				"id": "AmGraph-1",
				"lineColor": "#937BF3",
				"title": "graph 1",
				"valueField": "column-1"
			},
			{
				"columnWidth": 0,
				"fixedColumnWidth": 0,
				"gapPeriod": 1,
				"id": "AmGraph-2",
				"lineColor": "#937BF3",
				"negativeFillAlphas": 0,
				"title": "graph 2",
				"topRadius": 0,
				"valueField": "column-2"
			}
		],
		"guides": [],
		"valueAxes": [
			{
				"axisFrequency": 0,
				"axisTitleOffset": 20,
				"id": "ValueAxis-1",
				"maximumDate": "",
				"minimumDate": "",
				"position": "right",
				"precision": 0,
				"zeroGridAlpha": 0,
				"autoRotateAngle": 0,
				"axisAlpha": 0,
				"axisThickness": 8,
				"color": "#BBBBBB",
				"firstDayOfWeek": 0,
				"gridAlpha": 0.12,
				"gridCount": 1,
				"labelFrequency": 5,
				"labelOffset": -10,
				"minorGridAlpha": 0,
				"title": "",
				"titleFontSize": 0,
				"titleRotation": 0
			}
		],
		"allLabels": [],
		"balloon": {},
		"titles": [],
		"dataProvider": [
			{
				"date": "2018-09-01",
				"column-1": "12",
				"column-2": "6"
			},
			{
				"date": "2018-09-02",
				"column-1": "10",
				"column-2": "7"
			},
			{
				"date": "2018-09-03",
				"column-1": "8",
				"column-2": "8"
			},
			{
				"date": "2018-09-04",
				"column-1": "7",
				"column-2": "7"
			},
			{
				"date": "2018-09-05",
				"column-1": "7.5",
				"column-2": "6"
			},
			{
				"date": "2018-09-06",
				"column-1": "8",
				"column-2": "5"
			},
			{
				"date": "2018-09-07",
				"column-1": "9",
				"column-2": "4"
			},
			{
				"date": "2018-09-08",
				"column-1": "10",
				"column-2": "7"
			},
			{
				"date": "2018-09-09",
				"column-1": "9",
				"column-2": "9"
			},
			{
				"date": "2018-09-10",
				"column-1": "11",
				"column-2": "8"
			},
			{
				"date": "2018-09-11",
				"column-1": "13",
				"column-2": "7"
			},
			{
				"date": "2018-09-12",
				"column-1": "10",
				"column-2": "3"
			},
			{
				"date": "2018-09-13",
				"column-1": "8",
				"column-2": "5"
			},
			{
				"date": "2018-09-14",
				"column-1": "7",
				"column-2": "6"
			},
			{
				"date": "2018-09-15",
				"column-1": "10",
				"column-2": "7"
			},
			{
				"date": "2018-09-16",
				"column-1": "20",
				"column-2": "6"
			},
			{
				"date": "2018-09-17",
				"column-1": "10",
				"column-2": "3"
			},
			{
				"date": "2018-09-18",
				"column-1": "7",
				"column-2": "6"
			},
			{
				"date": "2018-09-19",
				"column-1": "6",
				"column-2": "5"
			},
			{
				"date": "2018-09-20",
				"column-1": "9",
				"column-2": "6"
			},
			{
				"date": "2018-09-21",
				"column-1": "11",
				"column-2": "7"
			},
			{
				"date": "2018-09-22",
				"column-1": "10",
				"column-2": "8"
			},
			{
				"date": "2018-09-23",
				"column-1": "9",
				"column-2": "7"
			},
			{
				"date": "2018-09-24",
				"column-1": "8",
				"column-2": "6"
			},
			{
				"date": "2018-09-25",
				"column-1": "7",
				"column-2": "5"
			},
			{
				"date": "2018-09-26",
				"column-1": "6",
				"column-2": "4"
			},
			{
				"date": "2018-09-27",
				"column-1": "5",
				"column-2": "3"
			},
			{
				"date": "2018-09-28",
				"column-1": "6",
				"column-2": "2"
			},
			{
				"date": "2018-09-29",
				"column-1": "7",
				"column-2": "1"
			},
			{
				"date": "2018-09-30",
				"column-1": "8",
				"column-2": "0"
			}
		]
	}
);
</script>